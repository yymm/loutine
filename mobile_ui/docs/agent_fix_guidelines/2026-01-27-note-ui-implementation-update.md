# Note UI実装方針の変更

**作成日**: 2026-01-27
**更新日**: 2026-01-27

## 変更概要
NoteページのUIを、LinkやPurchaseと同様の統一されたスタイルに変更しました。
また、BottomNavからの遷移先をリストページからエディタ画面に変更し、保存時にタグ選択できるようにしました。

## 実装内容

### 1. ルーティング変更
- **BottomNavのNoteタブ**: `/note` → エディタ画面（新規作成）を表示
- **リストページ**: `/note/list` に移動
- **編集ページ**: `/note/edit/:id` で個別編集

### 2. AppBarの統一
- **タイトル**: 「Note」に統一
- **左側アイコン**: BottomNavと同じ `Icons.note_add`
- **右側アイコン**: リストページへのナビゲーション `Icons.format_list_bulleted`
  - `/note/list` に遷移

### 3. 保存フローの変更
- **キャンセルボタン**: 削除（AppBarの戻るボタンで代用）
- **保存ボタン**: FloatingActionButton（画面右下）に配置
- **タグ選択**: 保存ボタン押下 → Modalダイアログでタグを複数選択 → 保存実行
- **Linkと同じUI**: MultiDropdownを使用したタグ選択

#### 保存処理の流れ
1. FAB（保存アイコン）をタップ
2. Modalダイアログが開き、タグを複数選択可能
3. Modal内の「保存」ボタンでノートを保存
4. 保存後は `/note/list` に遷移

### 4. Quillエディタツールバーの最適化
Markdown記法に対応した項目のみに絞り込みました：

#### 表示する機能（Markdown対応）
- **テキスト装飾**: 太字、斜体、取り消し線、インラインコード
- **見出し**: h1, h2, h3など
- **リスト**: 箇条書き、順序付きリスト、チェックリスト
- **コードブロック**: ``` で囲まれたコード
- **引用**: > で始まる引用文
- **リンク**: [text](url) 形式

#### 非表示にした機能（Markdown非対応または不要）
- 下線（Markdownに標準対応なし）
- 文字色・背景色（Markdown非対応）
- テキスト配置（左寄せ・中央・右寄せ）
- インデント（リストで自動対応）
- フォント設定（ファミリー・サイズ）
- 上付き/下付き文字
- 検索機能
- 区切り線表示

#### ツールバーサイズの調整
- `toolbarSize: 40` - ツールバー高さを抑えて画面を広く使用
- `iconSize: 18` - アイコンサイズを小さく
- `multiRowsDisplay: false` - 1行表示でコンパクトに

## 画面遷移フロー
```
BottomNav [Note] タップ
  ↓
/note (エディタ画面・新規作成)
  ├─ AppBar右上アイコン → /note/list (リストページ)
  ├─ AppBar左上（戻る）→ 前の画面に戻る
  └─ FAB（保存）→ タグ選択Modal → 保存 → /note/list

/note/list (リストページ)
  ├─ ノートタップ → /note/edit/:id (編集)
  └─ FAB(+) → /note (新規作成)
```

## UI一貫性
Link、Purchase、Noteの3つのフォームページで以下の要素を統一：
- AppBarのタイトルスタイル
- 左側にBottomNavと同じアイコン
- 右側にリストページへのナビゲーションアイコン
- シンプルで分かりやすいUI

## タグ機能
- Linkと同じMultiDropdownコンポーネントを使用
- 複数タグ選択可能
- 検索機能付き
- NoteモデルにtagIdsフィールドを保存

## 今後の拡張性
- 必要に応じてツールバーのカスタマイズ追加可能
- Markdown変換は既にDelta形式で保存されているため、後から追加可能
- タグのデフォルト選択機能（編集時に既存タグを表示）も追加可能
